<w:BasicPageWrapper hasForm="$true" omitWrapperFrame="$true" hasSidebarNotch="$false" isSidebarVisible="$false"
                  isDebugVisible="$false" disableFooter="$true" disableHomeAction="$true" disableLogoutAction="$true"
                  addContentMargin="$false"
                  debugTitle="AW Component Inspector">\
<style>
    .scrollClip {
        overflow:scroll;
        // border: 1px solid #9C9CB8;
        margin-top: 5px;
        height:650px;
        width:625px;
    }
    .pl {
        margin:0px;
        padding:0px;
    }
    .plsel {
        margin:0px;
        padding:0px;
        background:#FFEAAA;
    }
</style>
<a:ClientSideScript>
    ariba.Debug._AWCPISession='$request.sessionId';
    ariba.Debug._AWCPIRefreshId='<a:ActionId action="$refreshPage"/>';
</a:ClientSideScript>
<table width="100%" height="100%"><tr><td width="1%" valign="top">
<div class="flexContainer">
    <div style="width:300px"/>
    <w:TabSet class="noPadding tabWrapper" index="$tabIndex" action="$mainTabSelectionChanged">
        <w:Tab label="Content Tree">
            <a:If ifTrue="$traceDisplayGroup.filteredObjects.size">
                <t:DataTable item="$traceNode" children="$traceNode.children" displayGroup="$currentTraceDisplayGroup"
                              singleSelect="$true" showSelectionColumn="$false" submitOnSelectionChange="$true"
                              showColumnHeader="$false" enableScrolling="$true" showOptionsMenu="$true"
                              class="scrollTableWrapper smallFont" minHeight="400">
                    <t:HeadingArea>
                        <div class="flL" _ifTrue="$metadataDisplayGroup">
                            Show:
                            <a:If ifTrue="$showingMeta">
                                <a:Hyperlink action="${showingMeta=!showingMeta; null}">All</a:Hyperlink>
                                |
                                <b>Meta</b>
                            <a:Else/>
                                <b>All</b>
                                |
                                <a:Hyperlink action="${showingMeta=!showingMeta; null}">Meta</a:Hyperlink>
                            </a:If>
                        </div>
                    </t:HeadingArea>

                    <a:Content name="optionsMenu">
                        <a:If ifTrue="$showingFileContents">
                            <a:Hyperlink action="${showingFileContents=false;null}">&lt; Hide Contents</a:Hyperlink>
                        <a:Else/>
                            <a:Hyperlink action="${showingFileContents=true;null}">Show File Contents &gt;</a:Hyperlink>
                        </a:If>
                        &nbsp;
                    </a:Content>

                    <t:Column label="Component" isValueColumn="$true">\
                        <w:OutlineControl indentationPerLevel="12" renderAsTable="$true" style="font:9px Verdana, Arial, Helvetica, sans-serif">\
                            <a:Content name="icon">\
                                <span _ifTrue="$traceNode.associatedMetadata" class="cueTip" style="padding:1px; line-height:9px; margin-right:4px">M</span>\
                            </a:Content>
                            <b omitTags="$traceNode.elementIsStateless">$nodeTitle</b>
                        </w:OutlineControl>\
                    </t:Column>

                    <t:RowDetail style="font:normal 9px Verdana, Arial, Helvetica, sans-serif;color:#666666;text-align:right">\
                        <a:DebugRemoteOpen value="$currentFileLocation">\
                            <w:TruncateString value="$currentReferencePath" size="40" truncationStyle="1"/>
                             : $traceNode.sourceReference.lineNumber
                        </a:DebugRemoteOpen>\
                    </t:RowDetail>
                </t:DataTable>
            <a:Else/>
                <br/>
                <i>Component inspector not yet enabled.  Enabling...</i>
                <a:PhaseInvocation append='${session.dict.put("AWConstants.ComponentPathDebugEnabled", true)}'/>
                <a:ClientSideScript>
                    ariba.Debug.fireMainWindowAction("foo");
                </a:ClientSideScript>
            </a:If>
        </w:Tab>

        <w:Tab label="Click Path">
            <a:If ifTrue="$pathDisplayGroup.filteredObjects.size">
                <t:DataTable item="$traceNode" displayGroup="$pathDisplayGroup"
                              singleSelect="$true" showSelectionColumn="$false" submitOnSelectionChange="$true"
                              title="Component Path" showColumnHeader="$false" enableScrolling="$true" showOptionsMenu="$true"
                              class="scrollTableWrapper smallFont" minHeight="400">
                    <a:Content name="optionsMenu">
                        <a:If ifTrue="$showingFileContents">
                            <a:Hyperlink action="${showingFileContents=false;null}">&lt; Hide Contents</a:Hyperlink>
                        <a:Else/>
                            <a:Hyperlink action="${showingFileContents=true;null}">Show File Contents &gt;</a:Hyperlink>
                        </a:If>
                        &nbsp;
                    </a:Content>

                    <t:Column label="Component" isValueColumn="$true">
                        <div _ifTrue="$traceNode.associatedMetadata" class="flL cueTip" style="padding:1px; line-height:9px; margin:2px 4px 0px 0px">M</div>\
                        <b omitTags="$traceNode.elementIsStateless">$nodeTitle</b>\
                    </t:Column>

                    <t:RowDetail style="font:normal 9px Verdana, Arial, Helvetica, sans-serif;color:#666666;text-align:right">\
                        <a:DebugRemoteOpen value="$currentFileLocation">\
                            <w:TruncateString value="$currentReferencePath" size="40" truncationStyle="1"/>
                            : $traceNode.element.lineNumber
                        </a:DebugRemoteOpen>
                    </t:RowDetail>
                </t:DataTable>
            <a:Else/>
                <br/>
                <i><b>Alt-Click</b> On the area of interest in the main window to see its Component Path trace</i>
            </a:If>
        </w:Tab>
    </w:TabSet>
    <a:If ifTrue="$showDebuggerLink">
        <a:Hyperlink action="$launchDebugger">Launch AWDebugger</a:Hyperlink>
    </a:If>    
</div>
</td>
<a:MethodInvocation invoke="$makeSelectionCurrentItem"/>
<td valign="top" _ifTrue="$showingFileContents" style="padding:0px 5px 0px 20px">\
    <div class="flexContainer">\
    <a:RefreshRegion>
        <a:If ifTrue="$currentElement">
            <w:TabSet class="noPadding tabWrapper" index="$fileContentsTabIndex" action="$viewTabSelected">
                <w:Tab label="$referenceFileLabel">
                    <a:IncludeBlock name="Source" content="$referenceResourceFileContents"/>
                </w:Tab>
                <w:Tab label="$fileName">
                    <a:IncludeBlock name="Source" content="$resourceFileContents"/>
                </w:Tab>
                <w:Tab label="java" isVisible="$javaFullPath">
                    <a:IncludeBlock name="Source" content="$javaFileContents"/>
                </w:Tab>
                <w:Tab label="API" isVisible="$traceNode.componentDefinition">\
                    <div class="scrollClip" style="padding-right:5px"id="sourceDiv">\
                        <a:ApiPage componentDefinition="$traceNode.componentDefinition"/>
                        <br/>
                    </div>\
                </w:Tab>
                <w:Tab label="Meta Properties" isVisible="$traceNode.associatedMetadata">
                    <a:If ifTrue="$showProperties">
                        <t:DataTable enableScrolling="true" initialSortDirection="descending"
                                     item="$propertyKey" list="${traceNode.associatedMetadataProperties.keySet().toArray()}">
                            <t:HeadingArea>\
                                <b>Properties</b>
                                <a:If ifTrue="$canShowAssignments">\
                                    |
                                    <a:Hyperlink action="${showProperties=!showProperties; null}">Assignments</a:Hyperlink>
                                </a:If>
                            </t:HeadingArea>
                            <t:Column label="Property" key="self"/>
                            <t:Column label="Value">
                                <a:String value="${traceNode.associatedMetadataProperties.get(propertyKey)}"/>
                            </t:Column>
                        </t:DataTable>
                    <a:Else/>
                        <t:DataTable enableScrolling="true" showColumnHeader="$false"
                                     initialSortKey="rank" initialSortDirection="descending"
                                     item="$assignmentSource" list="${traceNode.associatedMetadataAssignmentMap.keySet().toArray()}">
                            <t:HeadingArea>\
                                <a:Hyperlink action="${showProperties=!showProperties; null}">Properties</a:Hyperlink>
                                |
                                <b>Assignments</b>
                            </t:HeadingArea>
                            <t:Column key="description"/>
                            <t:Column key="location" align="right">\
                                <a:DebugRemoteOpen value="$assignmentSource.location">\
                                    $assignmentSource.locationShortName\
                                </a:DebugRemoteOpen>\
                            </t:Column>
                            <t:RowDetail>
                                <div style='padding-left:30px;font:normal 11px/15px "Courier New", Courier, mono'>
                                    <a:For item="$assignment"
                                           list="${traceNode.associatedMetadataAssignmentMap.get(assignmentSource)}">
                                       <span emitTags="$assignment.isOverridden" style="text-decoration:line-through">
                                           <span style="color:green">$assignment.key: </span>
                                           <span style="color:blue">$assignment.value</span>
                                       </span>
                                       <br/>
                                    </a:For>
                                </div>
                            </t:RowDetail>
                        </t:DataTable>
                    </a:If>
                </w:Tab>
            </w:TabSet>
        <a:Else/>
            <br/>
            <i>Select file by clicking on row in right hand table to view file contents</i>
        </a:If>
    </a:RefreshRegion>
    </div>
</td></tr></table>
<a:ClientSideScript>
    ariba.Debug.cpiCheckWindowSize( <a:String value="${showingFileContents ? 960 : 320}"/>, 760);
</a:ClientSideScript>
</w:BasicPageWrapper>\
\
<a:Block name="Source">\
    <a:ClientSideScript filename="widg/prettify.js"/>
    <div class="scrollClip" id="sourceDiv">\
        <a:PrimitiveString value="$^content"/>
    </div>\
    <a:ClientSideScript>
        ariba.Debug.checkSelectionPos();
        prettyPrint();
    </a:ClientSideScript>
</a:Block>